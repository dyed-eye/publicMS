<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mathematical Pendulum</title>
<style>
    canvas {
        border: 1px solid black;
        background-color: #F0F0F0;
    }
</style>
</head>
<body>
<canvas id="canvas" width="800" height="600"></canvas>
<div>
    <label for="mass">Mass:</label>
    <input type="range" id="mass" min="1" max="10" value="5">
    <label for="length">Length:</label>
    <input type="range" id="length" min="100" max="300" value="200">
    <label for="friction">Friction:</label>
    <input type="range" id="friction" min="0" max="0.1" step="0.01" value="0">
    <button id="start">Start Timer</button>
    <p id="period"></p>
</div>
<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    const pivotX = canvas.width / 2;
    const pivotY = 100;
    let angle = Math.PI / 4; // initial angle
    let angularVelocity = 0.05;
    let timerId;
    let startTime;

    const massSlider = document.getElementById('mass');
    const lengthSlider = document.getElementById('length');
    const frictionSlider = document.getElementById('friction');
    const startButton = document.getElementById('start');
    const periodDisplay = document.getElementById('period');

    let mass = parseFloat(massSlider.value);
    let length = parseFloat(lengthSlider.value);
    let friction = parseFloat(frictionSlider.value);

    massSlider.addEventListener('input', () => {
        mass = parseFloat(massSlider.value);
    });

    lengthSlider.addEventListener('input', () => {
        length = parseFloat(lengthSlider.value);
    });

    frictionSlider.addEventListener('input', () => {
        friction = parseFloat(frictionSlider.value);
    });

    startButton.addEventListener('click', () => {
        if (startButton.textContent === 'Start Timer') {
            startButton.textContent = 'Stop Timer';
            startTime = Date.now();
            timerId = setInterval(() => {
                const period = (Date.now() - startTime) / 1000;
                periodDisplay.textContent = Period: ${period.toFixed(2)} seconds;
            }, 10);
        } else {
            startButton.textContent = 'Start Timer';
            clearInterval(timerId);
        }
    });

    function drawPendulum() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const ballX = pivotX + length * Math.sin(angle);
        const ballY = pivotY + length * Math.cos(angle);

        ctx.beginPath();
        ctx.moveTo(pivotX, pivotY);
        ctx.lineTo(ballX, ballY);
        ctx.strokeStyle = '#69A1CA'; // blue color
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(ballX, ballY, 20, 0, Math.PI * 2);
        ctx.fillStyle = '#CA6969'; // red color
        ctx.fill();

        const gravity = 0.2;
        const acceleration = (-gravity / length) * Math.sin(angle) - friction * angularVelocity;
        angularVelocity += acceleration;
        angle += angularVelocity;

        requestAnimationFrame(drawPendulum);
    }

    drawPendulum();
</script>
</body>
</html>
